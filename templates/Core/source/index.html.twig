{% extends 'index.html.twig' %}

{# INDEX : SOURCE #}

{# initialize the array of linked entities ([entity1, entity2 ...]) to which we wish to make a link-shortcuts
1) The table of results should include a collumn of the type: <th data-column-id = "linkEntity" data-formatter = "linkEntity" data-sortable = "false"> Col. </ Th>
2) the controller will have to return in the table rows the colloids of the type: "linkEntity1" => "patern1", "linkeEntity2" => "patern2" ... #}

{% set links =  [] %}

	{% block action %}
	{{ parent() }}

		<div class="btn-group btn-group-sm"> <div class="input-group-prepend">
			<i class="input-group-text fas fa-upload"></i>
		</div>
		{% if is_granted('ROLE_PROJECT') %}
			<a href="{{ path( route_importfiles ) }}" class="btn btn-light border btn-sm" role="button">
				{{ ['button.Import',entityname|capitalize]|join|trans}}
			</a>
		{% else %}
			<a href="#" class="btn btn-secondary btn-sm disabled" role="button">
				{{['button.Import',entityname|capitalize]|join|trans}}</a>
		{% endif %}
		{% if is_granted('ROLE_COLLABORATION') %}

			<a href="{{ path( 'importfilesinternal_lot_publie_index' ) }}" class="btn btn-light border" role="button">
				{{'button.Import lot materiel publie'|trans}}
			</a>
			<a href="{{ path( 'importfilessqcassembleepublie_index' ) }}" class="btn btn-light border" role="button">
				{{'button.Import sqc assemblee publie'|trans}}
			</a>
		{% else %}
			<a href="#" class="btn btn-secondary  disabled" role="button">
				{{['button.Import',entityname|capitalize]|join|trans}}</a>
			<a href="#" class="btn btn-secondary  disabled" role="button">
				{{['button.Import',entityname|capitalize]|join|trans}}</a>
		{% endif %}
	</div>
{% endblock %}

{% block body %}
	<div class="table-responsive">
		<table id="grid-basic" class="table table-condensed table-hover table-striped">
			<thead>
				<tr>
					<th data-column-id="source.id" data-type="numeric" data-visible="false">Id</th>
					<th data-column-id="source.codeSource" data-sortable="true">{{'Code source'|trans}}</th>
					<th
						data-column-id="source.anneeSource"
						data-type="numeric"
						data-sortable="true">{{'Annee source'|trans}}</th>
					<th data-column-id="source.libelleSource" data-sortable="true">{{'Libelle source'|trans}}</th>
					<th data-column-id="source.dateMaj" data-width="100">{{'list.Date maj'|trans}}</th>
					<th data-column-id="source.dateCre" data-width="100" data-visible="false">{{'list.Date cre'|trans}}</th>
					<th data-column-id="source.userCre" data-width="10" data-visible="false">{{'list.User cre'|trans}}</th>
					<th data-column-id="source.userMaj" data-width="10" data-visible="false">{{'list.User maj'|trans}}</th>
					<th
						data-column-id="show"
						data-formatter="show"
						data-sortable="false"
						data-width="20">{{'list.show'|trans}}</th>
					<th
						data-column-id="edit"
						data-formatter="edit"
						data-sortable="false"
						data-width="20">{{'list.edit'|trans}}</th>
					<th
						data-column-id="delete"
						data-formatter="delete"
						data-sortable="false"
						data-width="20">{{'list.delete'|trans}}</th>
				</tr>
			</thead>
		</table>
	</div>
{% endblock %}
